(this.webpackJsonpAyuGold=this.webpackJsonpAyuGold||[]).push([[139],{1176:function(e,t,a){"use strict";a.r(t);var n=a(41),r=a(19),o=a(20),l=a(22),i=a(21),s=a(0),u=a.n(s),p=a(16),c=a(39),m=a(11),d=a.n(m),g=a(56),k=a(68),h=a(32),f=a(58),b=a(18),S=a(231),v=a(119),E=a(13),F=a(5),j=a(23),N=a.n(j),O=a(55),_=a(51),T=a(117),y=a(12),B=a(229),D=a(27),x=Object(s.lazy)((function(){return Promise.resolve().then(a.bind(null,333))})),R=Object(s.lazy)((function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,615))})),C=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var o;Object(r.a)(this,a);var l=new Date,i="".concat(l.getFullYear(),"-").concat(l.getMonth()+1,"-").concat(l.getDate());return(o=t.call(this,e)).inputChange=function(e){return function(t){o.setState(Object(n.a)({},e,t.target.value))}},o.pilihSupplier=function(e){return function(e){var t=(e.target.value?e.target.value:"DEFALT | DEFAULT").split("|");o.setState({kodeSupplier:t[0],namaSupplier:t[1]})}},o.state={supplierList:[],DataSupplier:[],startDate:i,kodeSupplier:"",namaSupplier:"",tanggal:i,noBon:"",status:"",tampungBarang:[],columns:[{dataField:"kode_jenis",text:"Kode Barang"},{dataField:"kadar_cetak",text:"Kadar Cetak(%)"},{dataField:"p",text:"P"},{dataField:"k",text:"K"},{dataField:"pkg",text:"Bungkus(Gr)"},{dataField:"bruto",text:"Berat(Gr)"},{dataField:"kadar_beli",text:"Harga(%)"},{dataField:"netto",text:"Murni(Gr)",footerClasses:"sum-netto-terima-supplier"},{dataField:"ongkos_rp",text:"Ongkos(RP)",formatter:function(e){return u.a.createElement("span",null,"Rp. ",parseFloat(e).toLocaleString("ID-id"))}},{dataField:"Aksi",text:"Aksi",csvExport:!1,formatter:function(e,t,a){return u.a.createElement("div",{className:"text-center"},u.a.createElement("button",{"data-tip":!0,"data-for":"hapus",className:"btn btn-danger mr-2",onClick:function(){return Object(S.a)("TolakanReturnSupplier",a,o.props.dispatch,Object(g.j)())}},u.a.createElement(v.a,{id:"hapus",type:"dark",effect:"solid"},u.a.createElement("span",null,"Hapus")),u.a.createElement("i",{className:"fa fa-trash mr-1"})),u.a.createElement("br",null))}}]},o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(T.f)()),this.props.dispatch(Object(c.b)()),this.props.dispatch(Object(g.j)())}},{key:"handleSubmit",value:function(e){var t=(e.kodeJenis?e.kodeJenis:"DEFAULT|DEFAULT|DEFAULT|DEFAULT").split("|"),a={kode_kategori:e.kode_kategori,kode_jenis:t[0],kadar_cetak:parseFloat(e.kadar),kadar_beli:parseFloat(e.kadarTransaksi),no_barcode:"-",qty:1,p:parseFloat(e.p),k:parseFloat(e.k),pkg:parseFloat(e.pkg),gross:parseFloat(e.gross),bruto:parseFloat(e.bruto),netto:parseFloat(e.netto),ongkos_rp:parseFloat(void 0===e.rp?0:e.rp)},n=JSON.parse(localStorage.getItem("TolakanReturnSupplier"))||[];n.push(a),localStorage.setItem("TolakanReturnSupplier",JSON.stringify(n)),d.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}),this.props.dispatch(Object(g.j)()),this.props.dispatch(Object(k.a)("TerimaSupplier"))}},{key:"returnSupplierSubmit",value:function(){var e=this;if(""===this.state.noBon)return Object(b.e)("Mohon isi nomor bon"),!1;if(""===this.state.tanggal)return Object(b.e)("Mohon isi Tanggal"),!1;if(null===localStorage.getItem("TolakanReturnSupplier"))return Object(b.e)("Barang masih kosong, silahkan tambahkan barang"),!1;if(""===this.state.kodeSupplier)return Object(b.e)("Mohon pilih Supplier"),!1;var t=JSON.parse(localStorage.getItem("TolakanReturnSupplier")),a=t.length,n=t.map((function(e){return parseFloat(e.p)})).reduce((function(e,t){return e+t}),0),r=t.map((function(e){return parseFloat(e.k)})).reduce((function(e,t){return e+t}),0),o=t.map((function(e){return parseFloat(e.pkg)})).reduce((function(e,t){return e+t}),0),l=t.map((function(e){return parseFloat(e.bruto)})).reduce((function(e,t){return e+t}),0),i=t.map((function(e){return parseFloat(e.netto)})).reduce((function(e,t){return e+t}),0),s=t.map((function(e){return parseFloat(e.ongkos_rp)})).reduce((function(e,t){return e+t}),0),u={no_tolak:this.props.noFaktur,tanggal:this.state.tanggal,no_bon:this.state.noBon,kode_supplier:this.state.kodeSupplier,jenis_trx:"RETUR",total_qty:a,total_p:n,total_k:r,total_pkg:o,total_bruto:l,total_netto:i,total_ongkos:s,detail_barang:JSON.parse(localStorage.getItem("TolakanReturnSupplier"))};console.log(JSON.stringify(u)),this.props.dispatch(Object(E.t)());var p=[],m=JSON.parse(localStorage.getItem("TolakanReturnSupplier"));m.forEach((function(e,t){var a=[++t,e.kode_jenis,e.kadar_cetak,e.p,e.k,e.pkg,e.bruto,e.kadar_beli,parseFloat(e.netto).toFixed(3),"Rp. "+parseFloat(e.ongkos_rp).toLocaleString("id-ID")];p.push(a)}));var k=["","","","","",m.map((function(e){return e.pkg})).reduce((function(e,t){return e+t}),0),m.map((function(e){return e.bruto})).reduce((function(e,t){return e+t}),0),"",m.map((function(e){return e.netto})).reduce((function(e,t){return e+t}),0),"Rp. "+m.map((function(e){return e.ongkos_rp})).reduce((function(e,t){return e+t}),0).toLocaleString("id-ID")];p.push(k),console.log(JSON.stringify(p));var h=["No","Kode Barang","Kadar Cetak (%)","P","K","Bungkus(Gr)","Berat(Gr)","Harga(Gr)","Murni(Gr)","Ongkos(Rp)"];Object(F.c)("trx-tolakan-supplier/simpan",u).then((function(t){return d.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}).then((function(){return Object(f.a)("No Bon",e.state.noBon.toUpperCase(),"Tanggal",e.state.tanggal,"Supplier",e.state.kodeSupplier.toUpperCase(),"","","ADMIN",e.state.tanggal,"",h,"Tolakan Return Barang Supplier",p)})).then((function(){return Object(D.e)(["TolakanReturnSupplier","noFaktur"])})).then((function(){return e.props.dispatch(Object(E.k)())})).then((function(){return e.props.dispatch(Object(c.b)())})).then((function(){return e.props.dispatch(Object(g.j)())})).then((function(){return e.setState({noBon:"",kodeSupplier:""})})).then((function(){return document.getElementById("myForm").reset()}))})).catch((function(t){return d.a.fire({position:"top-end",icon:"error",text:"Data Gagal Ditambahkan",showConfirmButton:!1,timer:1500}).then((function(){return e.props.dispatch(Object(E.k)())}))}))}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"container-fluid",style:{color:"black"}},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-12"},u.a.createElement("div",{className:"card"},u.a.createElement(_.default,{title:"Tolakan Return Supplier"}),u.a.createElement("div",{className:"card-body"},u.a.createElement(R,{content:u.a.createElement(s.Suspense,{fallback:u.a.createElement(N.a,{width:"100%",height:400})},u.a.createElement(x,{from:"tolakan",onSubmit:function(t){return e.handleSubmit(t)},noFaktur:this.props.noFaktur})),title:"Tambah Data Barang"}),u.a.createElement("div",{className:"col-lg-12 col-md-12"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-lg-12"},u.a.createElement("form",{id:"myForm"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-lg-4"},u.a.createElement(h.a,{name:"supplier",component:y.b,options:this.props.supplier.map((function(e){return{value:e.kode_supplier,name:e.nama_supplier}})),type:"text",label:"Supplier",placeholder:"Masukan Supplier",onChange:function(t){e.setState({kodeSupplier:t})}})),u.a.createElement("div",{className:"col-lg-4"},u.a.createElement(h.a,{name:"tanggal",component:y.a,type:"date",label:"Tanggal",placeholder:"Masukan Tanggal",onChange:function(t){e.setState({tanggal:t.target.value})}})),u.a.createElement("div",{className:"col-lg-4"},u.a.createElement(h.a,{name:"no_bon",component:y.a,type:"text",label:"Nomor Bon",placeholder:"Masukan Nomor Bon",onChange:function(t){e.setState({noBon:t.target.value})}}))))),u.a.createElement("div",{className:"col-md-12 col-lg-12 mt-3"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-lg-6"}),u.a.createElement("div",{className:"col-lg-6"},u.a.createElement("div",{className:"text-right"},u.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.props.dispatch(Object(O.j)())}},"Tambah Data",u.a.createElement("i",{class:"fa fa-plus ml-3","aria-hidden":"true"})))))),u.a.createElement("div",{className:"col-lg-12 mt-3"},u.a.createElement(B.a,{keyField:"id",data:this.props.returnSupplier,columns:this.state.columns}),u.a.createElement("div",{className:"text-right"},u.a.createElement("button",{className:"btn btn-primary",disabled:this.props.onSend,onClick:function(){return e.returnSupplierSubmit()}},this.props.onSend?u.a.createElement("span",{className:"spinner-border spinner-border-sm mr-3","aria-hidden":"true"}):null,"Simpan",u.a.createElement("i",{class:"fa fa-paper-plane ml-3","aria-hidden":"true"})))))))))))}}]),a}(s.Component);t.default=Object(p.b)((function(e){return{noFaktur:e.provinsi.noFaktur,username:e.provinsi.username,returnSupplier:e.provinsi.listTolakanReturnSupplier,alert:e.provinsi.alert,error:e.provinsi.error,onSend:e.provinsi.onSend,supplier:e.provinsi.supplier}}),null)(C)}}]);
//# sourceMappingURL=139.84745524.chunk.js.map