(this.webpackJsonpAyuGold=this.webpackJsonpAyuGold||[]).push([[101],{1214:function(e,a,t){"use strict";t.r(a);var n=t(47),o=t(35),r=t(36),l=t(38),s=t(37),i=t(61),c=t.n(i),m=t(0),d=t.n(m),u=t(477),p=t.n(u),h=t(502),k=t.n(h),b=t(503),g=t.n(b),E=t(18),v=t(5),f=t(182),N=t(10),y=t.n(N),S=t(69),T=t(11),x=t(280),C=t(184),O=t(466),F=t(467),A=t(88),B=function(e){var a=e.input,t=e.label,n=e.type,o=e.limit,r=e.readOnly,l=e.meta,s=l.touched,i=l.error,c=l.warning;return d.a.createElement("div",{className:"form-group"},d.a.createElement("label",{htmlFor:"",className:"text-black"},t),d.a.createElement("input",Object.assign({},a,{type:n,className:"form-control",min:"0",step:"0.001",maxLength:o,readOnly:r})),s&&(i&&d.a.createElement("p",{className:"invalid-feedback"},i)||c&&d.a.createElement("p",null,c)))},j="https://147.139.193.169:3759/api/v1/",P=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(e){var n;Object(o.a)(this,t),n=a.call(this,e);var r=new Date,l="".concat(r.getFullYear(),"-").concat(r.getMonth()+1,"-").concat(r.getDate());return n.state={dateNow:l,columns:[{dataField:"jenis",text:"Jenis",footer:""},{dataField:"kadarCetak",text:"Kadar",footer:"Total Bruto"},{dataField:"bruto",text:"Bruto",footer:function(e){return e.reduce((function(e,a){return e+a}),0)}},{dataField:"kadarTransaksi",text:"%",footer:"Total Netto"},{dataField:"netto",text:"Netto",footer:function(e){return e.reduce((function(e,a){return e+a}),0)}}],listLokasi:[],listSales:[],listCustomer:[]},n}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;c.a.get(j+"storages2?tipeData=LOKASI").then((function(a){return e.setState({listLokasi:a.data})})),c.a.get(j+"storages2?tipeData=SALES").then((function(a){return e.setState({listSales:a.data})})),c.a.get(j+"customers").then((function(a){return e.setState({listCustomer:a.data})}))}},{key:"setFaktur",value:function(){this.props.change("noFaktur",this.props.noFaktur)}},{key:"onSubmitSelect",value:function(e,a){this.props.change(a,e)}},{key:"onSubmitSelectToko",value:function(e,a,t){var n=e.split("|");this.props.change(a,n[0]),this.props.change(t,n[1])}},{key:"render",value:function(){var e=this,a=this.state.listCustomer.map((function(e){return{value:e.namaToko+"|"+e.namaCustomer,name:e.namaToko}})),t=this.state.listSales.map((function(e){return{value:e.kodeLokasi,name:e.namaLokasi}})),n=this.state.listLokasi.map((function(e){return{value:e.kodeLokasi,name:e.namaLokasi}}));return d.a.createElement(d.a.Fragment,null,d.a.createElement("form",{onSubmit:this.props.handleSubmit},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-md-4 col-lg-4"},d.a.createElement(O.a,{name:"noFaktur",label:"Nomor Faktur",type:"text",component:B,onBlur:this.setFaktur(),readOnly:!0})),d.a.createElement("div",{className:"col-md-4 col-lg-4"},d.a.createElement(O.a,{name:"tanggal",label:"Tanggal",type:"date",component:B,defaultValue:this.state.dateNow})),d.a.createElement("div",{className:"col-lg-4 col-md-4"},d.a.createElement("label",{htmlFor:""},"Lokasi"),d.a.createElement(A.a,{options:n,search:!0,placeholder:"Silahkan Pilih",onChange:function(a){return e.onSubmitSelect(a,"kodeLokasi")}})),d.a.createElement("div",{className:"col-md-4 col-lg-4 d-none"},d.a.createElement(O.a,{name:"kodeLokasi",label:"kodeLokasi",type:"text",component:B,defaultValue:this.state.dateNow})),d.a.createElement("div",{className:"col-lg-4 col-md-4"},d.a.createElement("label",{htmlFor:""},"Sales"),d.a.createElement(A.a,{options:t,search:!0,placeholder:"Silahkan Pilih",onChange:function(a){return e.onSubmitSelect(a,"kodeSales")}})),d.a.createElement("div",{className:"col-md-4 col-lg-4 d-none"},d.a.createElement(O.a,{name:"kodeSales",label:"kodeSales",type:"text",component:B,defaultValue:this.state.dateNow})),d.a.createElement("div",{className:"col-lg-4 col-md-4"},d.a.createElement(O.a,{name:"noBon",component:B,type:"text",label:"No Bon Bayar"})),d.a.createElement("div",{className:"col-md-4 col-lg-4 d-none"},d.a.createElement(O.a,{name:"kodeToko",label:"Nama Toko",type:"text",component:B})),d.a.createElement("div",{className:"col-md-4 col-lg-4"},d.a.createElement("label",{htmlFor:""},"Nama Toko"),d.a.createElement(A.a,{options:a,search:!0,placeholder:"Silahkan Pilih",onChange:function(a){return e.onSubmitSelectToko(a,"kodeToko","namaCustomer")}})),d.a.createElement("div",{className:"col-md-4 col-lg-4"},d.a.createElement(O.a,{name:"namaCustomer",label:"Nama Customer",type:"text",component:B})),d.a.createElement("div",{className:"col-lg-12 col-md-12"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-6"},d.a.createElement("div",{className:"text-left"},d.a.createElement("button",{className:"btn btn-primary",type:"submit",disabled:this.props.onSend},this.props.onSend?d.a.createElement("span",{className:"spinner-border spinner-border-sm mr-3","aria-hidden":"true"}):null,"Simpan",d.a.createElement("i",{className:"fa fa-paper-plane ml-3"})))),d.a.createElement("div",{className:"col-lg-6"},d.a.createElement("div",{className:"text-right"},d.a.createElement("button",{className:"btn btn-primary",type:"button","data-target":"#editModal","data-toggle":"modal"},"Tambah Data",d.a.createElement("i",{className:"fa fa-plus ml-3"})))))))))}}]),t}(m.Component);P=Object(F.a)({form:"FormTolakanPembayaranCustomer",enableReinitialize:!0})(P);var R=Object(E.b)()(P),J=t(119),L=(t(299),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",i=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",m=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"",d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:[],u=arguments.length>12&&void 0!==arguments[12]?arguments[12]:"",p=arguments.length>13?arguments[13]:void 0,h=new J.default;h.autoTable(d,p,{startY:40});var k=h.lastAutoTable.finalY+10;h.text(u,14,15),h.setFontSize(10),h.text(e,14,25),h.text(":",37,25),h.text(a,40,25),h.text(t,120,25),h.text(":",141,25),h.text(n,145,25),h.text(o,14,30),h.text(":",37,30),h.text(r,40,30),h.text(l,120,30),h.text(":",141,30),h.text(s,145,30),h.text("DITERIMA",14,k),h.text("(                  )",14,k+20),h.text("DISETUJUI",60,k),h.text("(                  )",60,k+20),h.text("User",160,k+10),h.text(":",168,k+10),h.text(i,170,k+10),h.text("Cetak",160,k+15),h.text(":",168,k+15),h.text(c,170,k+15),h.text("Valid",160,k+20),h.text(":",168,k+20),h.text(m,170,k+20);var b=h.output("datauristring"),g="<embed width='100%' height='100%' src='"+b+"'/>",E=window.open();E.document.open(),E.document.write(g),E.document.close()}),D=t(469),_=function(e){var a=e.input,t=e.label,n=e.type,o=e.limit,r=e.readOnly,l=e.meta,s=l.touched,i=l.error,c=l.warning;return d.a.createElement("div",{className:"form-group"},d.a.createElement("label",{htmlFor:"",className:"text-black"},t),d.a.createElement("input",Object.assign({},a,{type:n,className:"form-control",min:"0",step:"0.001",maxLength:o,readOnly:r})),s&&(i&&d.a.createElement("p",{className:"invalid-feedback"},i)||c&&d.a.createElement("p",null,c)))},K=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={columns:[{dataField:"kodeBarang",text:"Kode barang"},{dataField:"bruto",text:"Bruto"},{dataField:"kadarTransaksi",text:"%"},{dataField:"netto",text:"Netto"}],listJenis:[],listJenisPerhiasan:[]},n}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;c.a.get("https://147.139.193.169:3759/api/v1/subcategorys2?kodeKelompok=CIOK").then((function(a){return e.setState({listJenis:a.data})})).catch((function(e){return console.log(e)})),c.a.get("https://147.139.193.169:3759/api/v1/subcategorys2?kodeKelompok=PERHIASAN").then((function(a){return e.setState({listJenisPerhiasan:a.data})})).catch((function(e){return console.log(e)})),this.props.change("noFaktur",this.props.noFaktur)}},{key:"onSubmitToko",value:function(e){var a=e.split("|");this.props.change("kadar",a[1]),this.props.change("kadarTransaksi",a[2]),this.props.change("kodeJenis",a[0])}},{key:"setNetto",value:function(){this.props.change("netto",this.props.netto)}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"col-lg-12 col-md-12"},d.a.createElement("form",{onSubmit:this.props.handleSubmit},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-4"},d.a.createElement("label",{htmlFor:""},"Jenis"),"PEMBAYARAN"===this.props.jenisTolakan?d.a.createElement(A.a,{options:this.state.listJenis.map((function(e){return{value:e.kodeJenis+"|"+e.kadarCetak+"|"+e.kadarJual,name:e.namaJenis}})),search:!0,placeholder:"Silahkan Pilih",onChange:function(a){return e.onSubmitToko(a)}}):d.a.createElement(A.a,{options:this.state.listJenisPerhiasan.map((function(e){return{value:e.kodeJenis+"|"+e.kadarCetak+"|"+e.kadarJual,name:e.namaJenis}})),search:!0,placeholder:"Silahkan Pilih",onChange:function(a){return e.onSubmitToko(a)}})),d.a.createElement("div",{className:"col-lg-4 col-md-4"},d.a.createElement(O.a,{name:"kodeJenis",label:"kodeJenis",component:_,type:"text",readOnly:!0})),d.a.createElement("div",{className:"col-lg-4 col-md-4"},d.a.createElement(O.a,{name:"kadar",label:"Kadar",component:_,type:"text",readOnly:!0})),d.a.createElement("div",{className:"col-lg-4 col-md-4 d-none"},d.a.createElement(O.a,{name:"noFaktur",label:"noFaktur",component:_,type:"text",readOnly:!0})),d.a.createElement("div",{className:"col-lg-4 col-md-4"},d.a.createElement(O.a,{name:"bruto",label:"Bruto",component:_,type:"text",onChange:this.setNetto()})),d.a.createElement("div",{className:"col-lg-4 col-md-4"},d.a.createElement(O.a,{name:"kadarTransaksi",label:"Persen",component:_,type:"text",readOnly:!0})),d.a.createElement("div",{className:"col-lg-4 col-md-4"},d.a.createElement(O.a,{name:"netto",label:"Netto",component:_,type:"text",readOnly:!0})),d.a.createElement("div",{className:"col-lg-12"},this.props.data?d.a.createElement(g.a,{keyField:"id",data:this.props.data,columns:this.state.columns,search:!0},(function(e){return d.a.createElement("div",{className:"form-group"},d.a.createElement(p.a,Object.assign({},e.baseProps,{striped:!0,hover:!0,condensed:!0,bordered:!0,headerClasses:"header-table",pagination:k()()})))})):null),d.a.createElement("div",{className:"col-lg-12 col-md-12"},d.a.createElement("div",{className:"text-right"},d.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Tambah"))))))}}]),t}(m.Component);K=Object(F.a)({form:"FieldTolakanCustomer",enableReinitialize:!0})(K);var w=Object(D.a)("FieldTolakanCustomer"),M=Object(E.b)((function(e){var a=w(e,"bruto","kadarTransaksi"),t=a.bruto,n=a.kadarTransaksi;return{netto:(parseFloat(t||0)*(parseFloat(n||0)/100)).toFixed(3)}}))(K),I=Object({NODE_ENV:"production",PUBLIC_URL:"/ayugold.com",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BACKEND_URL:"https://147.139.193.169:3759/api/v1/",REACT_APP_BACKEND_URLLOCAL:"http://192.168.1.27:7001/api/v1/",REACT_APP_BACKEND_URL_WEB:"https://ayu-grosir-api.herokuapp.com/api/v1/"}).REACT_APP_BACKEND_URL_NON_MASTER,U=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(e){var r;return Object(o.a)(this,t),(r=a.call(this,e)).selectJenis=function(e){return function(a){r.setState(Object(n.a)({},e,a.target.value))}},r.state={jenisTolakan:"PEMBAYARAN",columns:[{dataField:"kodeBarang",text:"Jenis"},{dataField:"bruto",text:"Bruto"},{dataField:"kadarTransaksi",text:"%"},{dataField:"netto",text:"Netto"}]},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(S.b)()),this.props.dispatch(Object(x.b)()),this.props.dispatch(Object(T.l)("tolakanCustomer"))}},{key:"handleSubmitBarang",value:function(e){var a={bruto:parseFloat(e.bruto),netto:parseFloat(e.netto),kodeBarang:e.kodeJenis,kadarTransaksi:parseFloat(e.kadarTransaksi)};console.log(a);var t=JSON.parse(localStorage.getItem("tolakanCustomer"))||[];t.push(a),localStorage.setItem("tolakanCustomer",JSON.stringify(t)),this.props.dispatch(Object(x.b)()),y.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500})}},{key:"handlSubmit",value:function(e){var a=this,t={noFaktur:e.noFaktur,tanggal:e.tanggal,noBon:e.noBon,kodeLokasi:e.kodeLokasi,kodeSales:e.kodeSales,namaToko:e.kodeToko,kodeCustomer:e.namaCustomer,keterangan:"-",totalAlatBayar:{totalPutusRp:0,totalPutusGr:0,totalTrfRp:0,totalCt:0,totalRsk:0,totalGiroRp:0,totalTunaiRp:0,tipeData:"string"},alatBayarBarang:JSON.parse(localStorage.getItem("tolakanCustomer")),footerDocument:{inputBy:this.props.username}};this.props.dispatch(Object(T.t)());var n=[];(JSON.parse(localStorage.getItem("tolakanCustomer"))||[]).forEach((function(e,a){var t=[e.kadarTransaksi,e.kodeBarang,"",e.bruto,e.kadarTransaksi,"0.000",e.netto,"0","1","0"];n.push(t)})),console.log(JSON.stringify(n));var o=["Kadar","Kode","Ket","Bruto(Gr)","Harga(%)","Diskon","Netto(Gr)","Pkg","Qty","Ongkos(Rp)"];c.a.post(I+"cst/dc/tlkbyr",t).then((function(t){return y.a.fire({position:"top-right",text:"Transaksi Berhasil",icon:"success",timer:2500,showConfirmButton:!1}).then((function(){return a.props.dispatch(Object(T.k)())})).then((function(){return a.props.dispatch(Object(f.a)("FormTolakanPembayaranCustomer"))})).then((function(){return L("No Trx",a.props.noFaktur,"Sales",e.kodeSales,"No Bon",e.noBon,"Customer",e.kodeCustomer,"ADMIN",e.tanggal,"ADMIN",o,"TOLAK PEMBAYARAN CUSTOMER",n)})).then((function(){return a.props.dispatch(Object(S.b)())}))})).catch((function(e){return y.a.fire({position:"top-right",text:"Sepertinya ada gangguan, Transaksi Gagal",icon:"error",timer:2500}).then((function(){return a.props.dispatch(Object(T.k)())}))}))}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"container-fluid"},d.a.createElement("div",{className:"col-lg-12 col-d-12"},d.a.createElement("ol",{className:"breadcrumb mb-2"},d.a.createElement(v.b,{to:"/KlasifikasiCustomer"},d.a.createElement("button",{type:"button",className:"btn btn-secondary"},d.a.createElement("i",{className:"fa fa-angle-left mr-3","aria-hidden":"true"})," ","Back"))),d.a.createElement("div",{className:"card"},d.a.createElement(C.default,{title:"Tolak Pembayaran Customer"}),d.a.createElement("div",{className:"card-body"},d.a.createElement("div",{className:"col-lg-4"},d.a.createElement("div",{className:"form-group"},d.a.createElement("label",{htmlFor:""},"Jenis Tolakan"),d.a.createElement("select",{name:"jenisTolakan",id:"jenisTolakan",className:"form-control",onChange:this.selectJenis("jenisTolakan")},d.a.createElement("option",{value:"PEMBAYARAN",key:"PEMBAYARAN"},"TOLAKAN PEMBAYARAN"),d.a.createElement("option",{value:"RETURN",key:"RETURN"},"TOLAKAN RETURN")))),d.a.createElement("div",{className:"col-lg-12"},d.a.createElement(R,{data:this.props.tabelTolakanCustomer,noFaktur:this.props.noFaktur,onSubmit:function(a){return e.handlSubmit(a)},onSend:this.props.onSend})),d.a.createElement("div",{className:"col-lg-12 mt-3"},this.props.tabelTolakanCustomer?d.a.createElement(g.a,{keyField:"id",data:this.props.tabelTolakanCustomer,columns:this.state.columns,search:!0},(function(e){return d.a.createElement("div",{className:"form-group"},d.a.createElement(p.a,Object.assign({},e.baseProps,{striped:!0,hover:!0,condensed:!0,bordered:!0,headerClasses:"header-table",pagination:k()()})))})):d.a.createElement(p.a,{keyField:"id",data:[],columns:this.state.columns,noDataIndication:"Tidak Ada Data",striped:!0,hover:!0,condensed:!0,bordered:!0,headerClasses:"header-table"})))),d.a.createElement("div",{id:"editModal",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"primary-header-modalLabel","aria-hidden":"true"},d.a.createElement("div",{className:"modal-dialog modal-lg"},d.a.createElement("div",{className:"modal-content"},d.a.createElement("div",{className:"modal-header modal-colored-header bg-primary"},d.a.createElement("h4",{className:"modal-title",id:"primary-header-modalLabel"},"Tambah Data Barang"),d.a.createElement("button",{id:"dismiss_modal1",name:"dismiss_modal1",type:"button",className:"close","data-dismiss":"modal","aria-hidden":"true"},"\xd7")),d.a.createElement("div",{className:"modal-body"},d.a.createElement(M,{jenisTolakan:this.state.jenisTolakan,data:this.props.tabelTolakanCustomer,noFaktur:this.props.noFaktur,onSubmit:function(a){return e.handleSubmitBarang(a)}})),d.a.createElement("div",{className:"modal-footer"},d.a.createElement("button",{type:"button",className:"btn btn-light","data-dismiss":"modal"},"Close")))))))}}]),t}(m.Component);a.default=Object(E.b)((function(e){return{tabelTolakanCustomer:e.provinsi.tabelTolakanCustomer,username:e.provinsi.username,tampungBarang:e.provinsi.terimaSupplierTemp,noFaktur:e.provinsi.noFaktur,alert:e.provinsi.alert,error:e.provinsi.error,onSend:e.provinsi.onSend}}),null)(U)},182:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var n=t(19),o=(n.a.arrayInsert,n.a.arrayMove,n.a.arrayPop,n.a.arrayPush,n.a.arrayRemove,n.a.arrayRemoveAll,n.a.arrayShift,n.a.arraySplice,n.a.arraySwap,n.a.arrayUnshift,n.a.autofill,n.a.blur,n.a.change,n.a.clearAsyncError,n.a.clearFields,n.a.clearSubmit,n.a.clearSubmitErrors,n.a.destroy,n.a.focus,n.a.initialize,n.a.registerField,n.a.reset);n.a.resetSection,n.a.setSubmitFailed,n.a.setSubmitSucceeded,n.a.startAsyncValidation,n.a.startSubmit,n.a.stopAsyncValidation,n.a.stopSubmit,n.a.submit,n.a.touch,n.a.unregisterField,n.a.untouch,n.a.updateSyncWarnings,n.a.updateSyncErrors}}]);
//# sourceMappingURL=101.0c28d116.chunk.js.map