(this.webpackJsonpAyuGold=this.webpackJsonpAyuGold||[]).push([[126],{1168:function(a,t,e){"use strict";e.r(t);var n=e(38),o=e(15),s=e(16),r=e(18),l=e(17),i=e(0),c=e.n(i),m=e(251),u=e.n(m),p=e(144),d=e.n(p),h=e(143),b=e.n(h),g=e(31),k=e(14),v=e(12),T=e.n(v),O=e(29),f=e(35),E=e(180),S=e(181),N=e(10),j=e(132),A=e(114),y=e.n(A),F=e(37),_=e(22),B=e.n(_),K=e(7),w=e(115),G=e(5),L=e(13),I=Object(i.lazy)((function(){return e.e(121).then(e.bind(null,1137))})),x=Object(i.lazy)((function(){return Promise.resolve().then(e.bind(null,252))})),D=p.Search.SearchBar,R=function(a){Object(r.a)(e,a);var t=Object(l.a)(e);function e(a){var s;return Object(o.a)(this,e),(s=t.call(this,a)).changeInput=function(a){return function(t){s.setState(Object(n.a)({},a,t.target.value))}},s.state={jenisBarang:"RONGSOK",listLokasi:[],tambahBarang:"col-lg-12 d-none",columns:[{dataField:"kode_jenis",text:"Kode",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"kadar_cetak",text:"Kadar",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"gross",text:"Gross (Gr)",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"pkg",text:"Pkg (Gr)",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"bruto",text:"Berat (Gr)",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"kadar_modal",text:"Harga",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"netto",text:"Netto (Gr)",sort:!0,headerStyle:function(){return{width:"10%"}}}]},s}return Object(s.a)(e,[{key:"componentDidMount",value:function(){var a=this;this.props.dispatch(Object(j.h)()),this.props.dispatch(Object(j.f)()),this.props.dispatch(Object(w.d)()),this.props.dispatch(Object(g.b)()),this.props.dispatch(Object(N.l)("totalanTimbangan")),this.props.dispatch(Object(N.o)("totalanTimbangan")),this.props.dispatch(Object(N.q)("totalanTimbangan")),this.props.dispatch(Object(N.m)("totalanTimbangan")),this.props.dispatch(Object(N.s)("totalanTimbangan")),this.props.dispatch(Object(N.r)("totalanTimbangan")),y.a.get("https://147.139.193.169:3759/api/v1/storages2?tipeData=LOKASI").then((function(t){return a.setState({listLokasi:t.data})})).catch((function(a){return console.log(a)})),null!==localStorage.getItem("totalanTimbangan")&&this.setState({tambahBarang:"col-lg-12"})}},{key:"handleSubmit",value:function(a){var t=(a.kodeBarang?a.kodeBarang:"DEFAULT|DEFUALT|DEFAULT|DEFAULT").split("|"),e={kode_kategori:t[4],kode_jenis:t[0],kadar_cetak:t[1],kadar_modal:t[3],kadar_jual:t[2],qty:1,plastik:0,kulit:0,pkg:parseFloat(a.pkg),gross:parseFloat(a.gross),bruto:parseFloat(a.gross)-parseFloat(a.pkg),netto:parseFloat(a.netto)},n=JSON.parse(localStorage.getItem("totalanTimbangan"))||[];n.push(e),localStorage.setItem("totalanTimbangan",JSON.stringify(n)),Object(G.c)("totalan-barang/post-totalan-barang/".concat(this.props.noFaktur),e),T.a.fire({position:"top-right",icon:"success",text:"Transaksi Berhasil",timer:1500,showConfirmButton:!1}),this.props.dispatch(Object(O.a)("FormModalTimbangan")),this.props.dispatch(Object(j.h)()),this.props.dispatch(Object(j.f)())}},{key:"startTotalan",value:function(){var a=this,t={no_totalan:this.props.noFaktur,kode_kelompok:this.props.kode_kelompok,tanggal:this.props.tanggal,kode_lokasi:this.props.lokasiSelected};Object(G.c)("totalan-barang/start-proses-totalan",t).then((function(){return a.setState({tambahBarang:"col-lg-12"})}))}},{key:"batalTotalan",value:function(){var a=this,t="";void 0!==this.props.status_totalan.no_totalan?t=this.props.status_totalan.no_totalan:Object(L.e)("Anda Belum Memulai Totalan"),Object(G.c)("totalan-barang/close-totalan/".concat(t)).then((function(){return Object(L.b)("Batal Totalan Berhasil")})).then((function(){return localStorage.removeItem("noFaktur")})).then((function(){return localStorage.removeItem("totalanTimbangan")})).then((function(){return a.props.dispatch(Object(g.b)())})).then((function(){return window.location.reload()}))}},{key:"render",value:function(){var a=this;return c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"card"},c.a.createElement(F.default,{title:"Totalan Timbangan"}),c.a.createElement("div",{className:"card-body"},c.a.createElement("h3",null,"Status Totalan : "),c.a.createElement("button",{className:"btn btn-success mb-3"},void 0===this.props.status_totalan.no_totalan?"TOTALAN KOSONG, ANDA BISA LAKUKAN TOTALAN SEKARANG":"TOTALAN SEDANG BERJALAN"),c.a.createElement("br",null),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(f.a,{name:"kode_kelompok",component:K.b,options:[{value:"PERHIASAN",name:"PERHIASAN"},{value:"CIOK",name:"CIOK"},{value:"RONGSOK",name:"RONGSOK"}],type:"text",label:"Kode Kelompok",placeholder:"Masukan "})),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(f.a,{name:"tanggal",component:K.a,type:"date",label:"Tanggal",placeholder:"Masukan Tanggal"})),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(f.a,{name:"lokasi",component:K.b,options:this.props.lokasi.map((function(a){return{value:a.kode_lokasi,name:a.nama_lokasi}})),type:"text",label:"Lokasi",placeholder:"Masukan Lokasi"})),c.a.createElement("div",{className:"col-lg-12 mt-3 mb-3"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6"},c.a.createElement("button",{className:"btn btn-danger",onClick:function(){return a.batalTotalan()}},"Batal Totalan")),c.a.createElement("div",{className:"col-lg-6"},c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{className:"btn btn-primary",onClick:function(){return a.startTotalan()}},"Mulai Totalan"))))),c.a.createElement("div",{className:this.state.tambahBarang},c.a.createElement(I,{noFaktur:this.props.noFaktur,jenisBarang:this.props.kode_kelompok,onSubmit:function(t){return a.handleSubmit(t)}})),c.a.createElement("div",{className:"col-lg-12 mt-2"},this.props.totalanTimbangan?c.a.createElement(d.a,{keyField:"kodeKelompok",data:this.props.totalanTimbangan,columns:this.state.columns,search:!0},(function(a){return c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"text-right mt-5 mb-3"},c.a.createElement(D,Object.assign({},a.searchProps,{className:"form-control",placeholder:"Tuliskan Kode / Nama",style:{margin:0,top:"50%"}}))),c.a.createElement(u.a,Object.assign({},a.baseProps,{striped:!0,hover:!0,condensed:!0,bordered:!0,headerClasses:"header-table",pagination:b()()})))})):c.a.createElement(u.a,{keyField:"kodeKelompok",data:[],columns:this.state.columns,bordered:!0,headerClasses:"header-table",noDataIndication:"Tidak Ada Data"}))))),c.a.createElement(x,{content:c.a.createElement(i.Suspense,{fallback:c.a.createElement(B.a,{width:"100%",height:50,count:5})},c.a.createElement(I,{noFaktur:this.props.noFaktur,jenisBarang:this.props.kode_kelompok,onSubmit:function(t){return a.handleSubmit(t)}})),title:""}))}}]),e}(i.Component);R=Object(E.a)({form:"TotalanTimbangan",enableReinitialize:!0})(R);var C=Object(S.a)("TotalanTimbangan");t.default=Object(k.b)((function(a){var t=C(a,"tanggal","kode_kelompok","lokasi"),e=t.tanggal,n=t.kode_kelompok,o=t.lokasi;return{totalanTimbangan:a.provinsi.totalanTimbangan,noFaktur:a.provinsi.noFaktur,listTotalanTimbangan:a.provinsi.listTotalanTimbangan,sumBruto:a.perhitungan.sumBruto,sumNetto:a.perhitungan.sumNetto,sumGross:a.perhitungan.sumGross,sumPkg:a.perhitungan.sumPkg,sumQty:a.perhitungan.sumQty,sumRp:a.perhitungan.sumRp,onSend:a.provinsi.onSend,status_totalan:a.provinsi.status_totalan,lokasi:a.provinsi.lokasi,tanggal:e,kode_kelompok:n,lokasiSelected:o}}))(R)}}]);
//# sourceMappingURL=126.5a46f5b7.chunk.js.map