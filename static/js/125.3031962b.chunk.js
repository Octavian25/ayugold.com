(this.webpackJsonpAyuGold=this.webpackJsonpAyuGold||[]).push([[125],{1168:function(t,a,e){"use strict";e.r(a);var n=e(32),o=e(15),s=e(16),l=e(18),r=e(17),i=e(0),c=e.n(i),m=e(254),p=e.n(m),d=e(148),u=e.n(d),h=e(147),g=e.n(h),k=e(33),b=e(14),v=e(7),O=e.n(v),T=e(25),f=e(39),E=e(183),N=e(184),j=e(9),S=e(136),_=e(35),y=e(21),A=e.n(y),F=e(6),B=e(118),K=e(5),w=e(11),L=e(102),G=Object(i.lazy)((function(){return e.e(120).then(e.bind(null,1136))})),x=Object(i.lazy)((function(){return Promise.resolve().then(e.bind(null,255))})),I=d.Search.SearchBar,P=function(t){Object(l.a)(e,t);var a=Object(r.a)(e);function e(t){var s;return Object(o.a)(this,e),(s=a.call(this,t)).changeInput=function(t){return function(a){s.setState(Object(n.a)({},t,a.target.value))}},s.state={jenisBarang:"RONGSOK",listLokasi:[],mulai:!1,tambahBarang:"col-lg-12 d-none",columns:[{dataField:"kode_jenis",text:"Kode",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"kadar_cetak",text:"Kadar",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"gross",text:"Gross (Gr)",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"pkg",text:"Pkg (Gr)",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"bruto",text:"Berat (Gr)",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"kadar_modal",text:"Harga",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"netto",text:"Netto (Gr)",sort:!0,headerStyle:function(){return{width:"10%"}}}]},s}return Object(s.a)(e,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(S.h)()),this.props.dispatch(Object(S.f)()),this.props.dispatch(Object(B.d)()),this.props.dispatch(Object(k.b)()),this.props.dispatch(Object(L.e)()),this.props.dispatch(Object(j.l)("totalanTimbangan")),this.props.dispatch(Object(j.o)("totalanTimbangan")),this.props.dispatch(Object(j.q)("totalanTimbangan")),this.props.dispatch(Object(j.m)("totalanTimbangan")),this.props.dispatch(Object(j.s)("totalanTimbangan")),this.props.dispatch(Object(j.r)("totalanTimbangan")),null!==localStorage.getItem("totalanTimbangan")&&this.setState({tambahBarang:"col-lg-12"})}},{key:"handleSubmit",value:function(t){var a=(t.kodeBarang?t.kodeBarang:"DEFAULT|DEFUALT|DEFAULT|DEFAULT").split("|"),e={kode_kategori:a[4],kode_jenis:a[0],kadar_cetak:a[1],kadar_modal:a[3],kadar_jual:a[2],qty:1,plastik:0,kulit:0,pkg:parseFloat(t.pkg),gross:parseFloat(t.gross),bruto:parseFloat(t.gross)-parseFloat(t.pkg),netto:parseFloat(t.netto)},n=JSON.parse(localStorage.getItem("totalanTimbangan"))||[];n.push(e),localStorage.setItem("totalanTimbangan",JSON.stringify(n)),Object(K.c)("totalan-barang/post-totalan-barang/".concat(this.props.noFaktur),e),O.a.fire({position:"top-right",icon:"success",text:"Transaksi Berhasil",timer:1500,showConfirmButton:!1}),this.props.dispatch(Object(T.a)("FormModalTimbangan")),this.props.dispatch(Object(S.h)()),this.props.dispatch(Object(S.f)())}},{key:"startTotalan",value:function(){var t=this;if(void 0===this.props.kode_kelompok)return Object(w.e)("Mohon isi Kode Kelompok"),!1;if(void 0===this.props.tanggal)return Object(w.e)("Mohon Isi Tanggal"),!1;if(void 0===this.props.lokasiSelected)return Object(w.e)("Mohon isi Lokasi"),!1;this.setState({mulai:!0});var a={no_totalan:this.props.noFaktur,kode_kelompok:this.props.kode_kelompok,tanggal:this.props.tanggal,kode_lokasi:this.props.lokasiSelected};Object(K.c)("totalan-barang/start-proses-totalan",a).then((function(){return t.setState({mulai:!0})}))}},{key:"batalTotalan",value:function(){var t=this,a="";void 0!==this.props.status_totalan.no_totalan?a=this.props.status_totalan.no_totalan:Object(w.e)("Anda Belum Memulai Totalan"),Object(K.c)("totalan-barang/close-totalan/".concat(a)).then((function(){return Object(w.b)("Batal Totalan Berhasil")})).then((function(){return localStorage.removeItem("noFaktur")})).then((function(){return localStorage.removeItem("totalanTimbangan")})).then((function(){return t.props.dispatch(Object(k.b)())})).then((function(){return window.location.reload()}))}},{key:"render",value:function(){var t=this;return c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"card"},c.a.createElement(_.default,{title:"Totalan Timbangan"}),c.a.createElement("div",{className:"card-body"},c.a.createElement("h3",null,"Status Totalan : "),c.a.createElement("button",{className:"btn btn-success mb-3"},void 0===this.props.status_totalan.no_totalan?"TOTALAN KOSONG, ANDA BISA LAKUKAN TOTALAN SEKARANG":"TOTALAN SEDANG BERJALAN"),c.a.createElement("br",null),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:this.state.mulai?"col-lg-12 d-none":void 0===this.props.status_totalan.no_totalan?"col-lg-12":"col-lg-12 d-none"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(f.a,{name:"kode_kelompok",component:F.b,options:[{value:"PERHIASAN",name:"PERHIASAN"},{value:"CIOK",name:"CIOK"},{value:"RONGSOK",name:"RONGSOK"}],type:"text",label:"Kode Kelompok",placeholder:"Masukan "})),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(f.a,{name:"tanggal",component:F.a,type:"date",label:"Tanggal",placeholder:"Masukan Tanggal"})),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(f.a,{name:"lokasi",component:F.b,options:this.props.dataLokasiPindah.map((function(t){return{value:t.kode_lokasi,name:t.nama_lokasi}})),type:"text",label:"Lokasi",placeholder:"Masukan Lokasi"})))),c.a.createElement("div",{className:"col-lg-12 mt-3 mb-3"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6"},c.a.createElement("button",{className:"btn btn-danger",onClick:function(){return t.batalTotalan()}},"Batal Totalan")),c.a.createElement("div",{className:"col-lg-6"},c.a.createElement("div",{className:this.state.mulai?"text-right d-none":void 0===this.props.status_totalan.no_totalan?"text-right":"text-right d-none"},c.a.createElement("button",{className:"btn btn-primary",onClick:function(){return t.startTotalan()}},"Mulai Totalan"))))),c.a.createElement("div",{className:this.state.mulai?"col-lg-12":void 0===this.props.status_totalan.no_totalan?"col-lg-12 d-none":"col-lg-12"},c.a.createElement(G,{noFaktur:this.props.noFaktur,jenisBarang:this.props.kode_kelompok,onSubmit:function(a){return t.handleSubmit(a)}})),c.a.createElement("div",{className:"col-lg-12 mt-2"},this.props.totalanTimbangan?c.a.createElement(u.a,{keyField:"kodeKelompok",data:this.props.totalanTimbangan,columns:this.state.columns,search:!0},(function(t){return c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"text-right mt-5 mb-3"},c.a.createElement(I,Object.assign({},t.searchProps,{className:"form-control",placeholder:"Tuliskan Kode / Nama",style:{margin:0,top:"50%"}}))),c.a.createElement(p.a,Object.assign({},t.baseProps,{striped:!0,hover:!0,condensed:!0,bordered:!0,headerClasses:"header-table",pagination:g()()})))})):c.a.createElement(p.a,{keyField:"kodeKelompok",data:[],columns:this.state.columns,bordered:!0,headerClasses:"header-table",noDataIndication:"Tidak Ada Data"}))))),c.a.createElement(x,{content:c.a.createElement(i.Suspense,{fallback:c.a.createElement(A.a,{width:"100%",height:50,count:5})},c.a.createElement(G,{noFaktur:this.props.noFaktur,jenisBarang:this.props.kode_kelompok,onSubmit:function(a){return t.handleSubmit(a)}})),title:""}))}}]),e}(i.Component);P=Object(E.a)({form:"TotalanTimbangan",enableReinitialize:!0})(P);var M=Object(N.a)("TotalanTimbangan");a.default=Object(b.b)((function(t){var a=M(t,"tanggal","kode_kelompok","lokasi"),e=a.tanggal,n=a.kode_kelompok,o=a.lokasi;return{totalanTimbangan:t.provinsi.totalanTimbangan,noFaktur:t.provinsi.noFaktur,listTotalanTimbangan:t.provinsi.listTotalanTimbangan,sumBruto:t.perhitungan.sumBruto,sumNetto:t.perhitungan.sumNetto,sumGross:t.perhitungan.sumGross,sumPkg:t.perhitungan.sumPkg,sumQty:t.perhitungan.sumQty,sumRp:t.perhitungan.sumRp,onSend:t.provinsi.onSend,status_totalan:t.provinsi.status_totalan,lokasi:t.provinsi.lokasi,tanggal:e,kode_kelompok:n,lokasiSelected:o,dataLokasiPindah:t.provinsi.dataLokasiPindah,initialValues:{kode_kelompok:t.provinsi.status_totalan.kode_kelompok,tanggal:t.provinsi.status_totalan.tanggal}}}))(P)}}]);
//# sourceMappingURL=125.3031962b.chunk.js.map