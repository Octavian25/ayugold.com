(this.webpackJsonpAyuGold=this.webpackJsonpAyuGold||[]).push([[127],{1169:function(a,t,e){"use strict";e.r(t);var n=e(37),o=e(15),l=e(16),s=e(18),r=e(17),i=e(0),c=e.n(i),m=e(252),u=e.n(m),p=e(144),d=e.n(p),h=e(143),b=e.n(h),g=e(30),k=e(14),v=e(13),T=e.n(v),O=e(25),E=e(36),f=e(181),N=e(182),S=e(11),j=e(132),_=e(32),y=e(23),A=e.n(y),F=e(7),B=e(115),w=e(5),K=e(9),G=Object(i.lazy)((function(){return e.e(122).then(e.bind(null,1138))})),x=Object(i.lazy)((function(){return Promise.resolve().then(e.bind(null,253))})),I=p.Search.SearchBar,L=function(a){Object(s.a)(e,a);var t=Object(r.a)(e);function e(a){var l;return Object(o.a)(this,e),(l=t.call(this,a)).changeInput=function(a){return function(t){l.setState(Object(n.a)({},a,t.target.value))}},l.state={jenisBarang:"RONGSOK",listLokasi:[],tambahBarang:"col-lg-12 d-none",columns:[{dataField:"kode_jenis",text:"Kode",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"kadar_cetak",text:"Kadar",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"gross",text:"Gross (Gr)",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"pkg",text:"Pkg (Gr)",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"bruto",text:"Berat (Gr)",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"kadar_modal",text:"Harga",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"netto",text:"Netto (Gr)",sort:!0,headerStyle:function(){return{width:"10%"}}}]},l}return Object(l.a)(e,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(j.h)()),this.props.dispatch(Object(j.f)()),this.props.dispatch(Object(B.d)()),this.props.dispatch(Object(g.b)()),this.props.dispatch(Object(S.l)("totalanTimbangan")),this.props.dispatch(Object(S.o)("totalanTimbangan")),this.props.dispatch(Object(S.q)("totalanTimbangan")),this.props.dispatch(Object(S.m)("totalanTimbangan")),this.props.dispatch(Object(S.s)("totalanTimbangan")),this.props.dispatch(Object(S.r)("totalanTimbangan")),null!==localStorage.getItem("totalanTimbangan")&&this.setState({tambahBarang:"col-lg-12"})}},{key:"handleSubmit",value:function(a){var t=(a.kodeBarang?a.kodeBarang:"DEFAULT|DEFUALT|DEFAULT|DEFAULT").split("|"),e={kode_kategori:t[4],kode_jenis:t[0],kadar_cetak:t[1],kadar_modal:t[3],kadar_jual:t[2],qty:1,plastik:0,kulit:0,pkg:parseFloat(a.pkg),gross:parseFloat(a.gross),bruto:parseFloat(a.gross)-parseFloat(a.pkg),netto:parseFloat(a.netto)},n=JSON.parse(localStorage.getItem("totalanTimbangan"))||[];n.push(e),localStorage.setItem("totalanTimbangan",JSON.stringify(n)),Object(w.c)("totalan-barang/post-totalan-barang/".concat(this.props.noFaktur),e),T.a.fire({position:"top-right",icon:"success",text:"Transaksi Berhasil",timer:1500,showConfirmButton:!1}),this.props.dispatch(Object(O.a)("FormModalTimbangan")),this.props.dispatch(Object(j.h)()),this.props.dispatch(Object(j.f)())}},{key:"startTotalan",value:function(){var a=this,t={no_totalan:this.props.noFaktur,kode_kelompok:this.props.kode_kelompok,tanggal:this.props.tanggal,kode_lokasi:this.props.lokasiSelected};Object(w.c)("totalan-barang/start-proses-totalan",t).then((function(){return a.setState({tambahBarang:"col-lg-12"})}))}},{key:"batalTotalan",value:function(){var a=this,t="";void 0!==this.props.status_totalan.no_totalan?t=this.props.status_totalan.no_totalan:Object(K.e)("Anda Belum Memulai Totalan"),Object(w.c)("totalan-barang/close-totalan/".concat(t)).then((function(){return Object(K.b)("Batal Totalan Berhasil")})).then((function(){return localStorage.removeItem("noFaktur")})).then((function(){return localStorage.removeItem("totalanTimbangan")})).then((function(){return a.props.dispatch(Object(g.b)())})).then((function(){return window.location.reload()}))}},{key:"render",value:function(){var a=this;return c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"card"},c.a.createElement(_.default,{title:"Totalan Timbangan"}),c.a.createElement("div",{className:"card-body"},c.a.createElement("h3",null,"Status Totalan : "),c.a.createElement("button",{className:"btn btn-success mb-3"},void 0===this.props.status_totalan.no_totalan?"TOTALAN KOSONG, ANDA BISA LAKUKAN TOTALAN SEKARANG":"TOTALAN SEDANG BERJALAN"),c.a.createElement("br",null),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:void 0===this.props.status_totalan.no_totalan?"col-lg-12":"col-lg-12 d-none"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(E.a,{name:"kode_kelompok",component:F.b,options:[{value:"PERHIASAN",name:"PERHIASAN"},{value:"CIOK",name:"CIOK"},{value:"RONGSOK",name:"RONGSOK"}],type:"text",label:"Kode Kelompok",placeholder:"Masukan "})),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(E.a,{name:"tanggal",component:F.a,type:"date",label:"Tanggal",placeholder:"Masukan Tanggal"})),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(E.a,{name:"lokasi",component:F.b,options:this.props.lokasi.map((function(a){return{value:a.kode_lokasi,name:a.nama_lokasi}})),type:"text",label:"Lokasi",placeholder:"Masukan Lokasi"})))),c.a.createElement("div",{className:"col-lg-12 mt-3 mb-3"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6"},c.a.createElement("button",{className:"btn btn-danger",onClick:function(){return a.batalTotalan()}},"Batal Totalan")),c.a.createElement("div",{className:"col-lg-6"},c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{className:"btn btn-primary",onClick:function(){return a.startTotalan()}},"Mulai Totalan"))))),c.a.createElement("div",{className:this.state.tambahBarang},c.a.createElement(G,{noFaktur:this.props.noFaktur,jenisBarang:this.props.kode_kelompok,onSubmit:function(t){return a.handleSubmit(t)}})),c.a.createElement("div",{className:"col-lg-12 mt-2"},this.props.totalanTimbangan?c.a.createElement(d.a,{keyField:"kodeKelompok",data:this.props.totalanTimbangan,columns:this.state.columns,search:!0},(function(a){return c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"text-right mt-5 mb-3"},c.a.createElement(I,Object.assign({},a.searchProps,{className:"form-control",placeholder:"Tuliskan Kode / Nama",style:{margin:0,top:"50%"}}))),c.a.createElement(u.a,Object.assign({},a.baseProps,{striped:!0,hover:!0,condensed:!0,bordered:!0,headerClasses:"header-table",pagination:b()()})))})):c.a.createElement(u.a,{keyField:"kodeKelompok",data:[],columns:this.state.columns,bordered:!0,headerClasses:"header-table",noDataIndication:"Tidak Ada Data"}))))),c.a.createElement(x,{content:c.a.createElement(i.Suspense,{fallback:c.a.createElement(A.a,{width:"100%",height:50,count:5})},c.a.createElement(G,{noFaktur:this.props.noFaktur,jenisBarang:this.props.kode_kelompok,onSubmit:function(t){return a.handleSubmit(t)}})),title:""}))}}]),e}(i.Component);L=Object(f.a)({form:"TotalanTimbangan",enableReinitialize:!0})(L);var R=Object(N.a)("TotalanTimbangan");t.default=Object(k.b)((function(a){var t=R(a,"tanggal","kode_kelompok","lokasi"),e=t.tanggal,n=t.kode_kelompok,o=t.lokasi;return{totalanTimbangan:a.provinsi.totalanTimbangan,noFaktur:a.provinsi.noFaktur,listTotalanTimbangan:a.provinsi.listTotalanTimbangan,sumBruto:a.perhitungan.sumBruto,sumNetto:a.perhitungan.sumNetto,sumGross:a.perhitungan.sumGross,sumPkg:a.perhitungan.sumPkg,sumQty:a.perhitungan.sumQty,sumRp:a.perhitungan.sumRp,onSend:a.provinsi.onSend,status_totalan:a.provinsi.status_totalan,lokasi:a.provinsi.lokasi,tanggal:e,kode_kelompok:n,lokasiSelected:o}}))(L)}}]);
//# sourceMappingURL=127.82f0c708.chunk.js.map